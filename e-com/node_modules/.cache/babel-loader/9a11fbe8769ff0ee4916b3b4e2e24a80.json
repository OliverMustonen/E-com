{"ast":null,"code":"import _objectSpread from\"U:/Working-progress/INL\\xC4MNINGSUPPGIFTER/JV 3 INL\\xC4MNINGSUPPGIFT/Inl\\xE4mningsuppgift/JS-3/e-com/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"U:/Working-progress/INL\\xC4MNINGSUPPGIFTER/JV 3 INL\\xC4MNINGSUPPGIFT/Inl\\xE4mningsuppgift/JS-3/e-com/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import actiontypes from\"../actiontypes\";var initState={shoppingCart:[],totalCartQuantity:0,totalCartAmount:0};var cartReducer=function cartReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initState;var action=arguments.length>1?arguments[1]:undefined;var itemIndex;switch(action.type){case actiontypes().cart.add:itemIndex=state.shoppingCart.findIndex(function(product){return product._id===action.payload._id;});itemIndex<0?state.shoppingCart=[].concat(_toConsumableArray(state.shoppingCart),[_objectSpread(_objectSpread({},action.payload),{},{quantity:1})]):state.shoppingCart[itemIndex].quantity+=1;state.totalCartAmount=getTotalAmount(state.shoppingCart);state.totalCartQuantity=getTotalQuantity(state.shoppingCart);return state;// if(itemIndex < 0) {\n//   console.log(1)\n//   return {\n//    ...state,\n//    shoppingCart: [...state.shoppingCart, {...action.payload, quantity: 1}]\n//  }\n// } else {\n// }\ncase actiontypes().cart.sub:action.payload.quantity===1?state.shoppingCart=state.shoppingCart.filter(function(product){return product._id!==action.payload._id;}):action.payload.quantity-=1;// itemIndex = state.shoppingCart.findIndex(product => product._id === action.payload)\n// state.shoppingCart[itemIndex].quantity === 1\n// ? state.shoppingCart = state.shoppingCart.filter(product => product._id !== action.payload)\n// : state.shoppingCart[itemIndex].quantity -= 1\nstate.totalCartAmount=getTotalAmount(state.shoppingCart);state.totalCartQuantity=getTotalQuantity(state.shoppingCart);return state;case actiontypes().cart.delete:state.shoppingCart=state.shoppingCart.filter(function(product){return product._id!==action.payload;});state.totalCartAmount=getTotalAmount(state.shoppingCart);state.totalCartQuantity=getTotalQuantity(state.shoppingCart);return state;default:return state;}};var getTotalQuantity=function getTotalQuantity(cart){var total=0;cart.forEach(function(product){total+=product.quantity;});return total;};var getTotalAmount=function getTotalAmount(cart){var total=0;cart.forEach(function(product){total+=product.price*product.quantity;});return total;};export default cartReducer;","map":{"version":3,"sources":["U:/Working-progress/INLÄMNINGSUPPGIFTER/JV 3 INLÄMNINGSUPPGIFT/Inlämningsuppgift/JS-3/e-com/src/store/reducers/cartReducer.js"],"names":["actiontypes","initState","shoppingCart","totalCartQuantity","totalCartAmount","cartReducer","state","action","itemIndex","type","cart","add","findIndex","product","_id","payload","quantity","getTotalAmount","getTotalQuantity","sub","filter","delete","total","forEach","price"],"mappings":"qXAAA,MAAOA,CAAAA,WAAP,KAAwB,gBAAxB,CAEA,GAAMC,CAAAA,SAAS,CAAG,CAChBC,YAAY,CAAE,EADE,CAEhBC,iBAAiB,CAAE,CAFH,CAGhBC,eAAe,CAAE,CAHD,CAAlB,CAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAA+B,IAA9BC,CAAAA,KAA8B,2DAAtBL,SAAsB,IAAXM,CAAAA,MAAW,2CACjD,GAAIC,CAAAA,SAAJ,CACA,OAAOD,MAAM,CAACE,IAAd,EACE,IAAKT,CAAAA,WAAW,GAAGU,IAAd,CAAmBC,GAAxB,CACEH,SAAS,CAAGF,KAAK,CAACJ,YAAN,CAAmBU,SAAnB,CAA6B,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,GAAR,GAAgBP,MAAM,CAACQ,OAAP,CAAeD,GAAnC,EAApC,CAAZ,CACAN,SAAS,CAAG,CAAZ,CACEF,KAAK,CAACJ,YAAN,8BAAyBI,KAAK,CAACJ,YAA/B,kCAAiDK,MAAM,CAACQ,OAAxD,MAAiEC,QAAQ,CAAE,CAA3E,IADF,CAEEV,KAAK,CAACJ,YAAN,CAAmBM,SAAnB,EAA8BQ,QAA9B,EAA0C,CAF5C,CAIAV,KAAK,CAACF,eAAN,CAAwBa,cAAc,CAACX,KAAK,CAACJ,YAAP,CAAtC,CACAI,KAAK,CAACH,iBAAN,CAA0Be,gBAAgB,CAACZ,KAAK,CAACJ,YAAP,CAA1C,CAEA,MAAOI,CAAAA,KAAP,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGF,IAAKN,CAAAA,WAAW,GAAGU,IAAd,CAAmBS,GAAxB,CACEZ,MAAM,CAACQ,OAAP,CAAeC,QAAf,GAA4B,CAA5B,CACEV,KAAK,CAACJ,YAAN,CAAqBI,KAAK,CAACJ,YAAN,CAAmBkB,MAAnB,CAA0B,SAAAP,OAAO,QAAIA,CAAAA,OAAO,CAACC,GAAR,GAAgBP,MAAM,CAACQ,OAAP,CAAeD,GAAnC,EAAjC,CADvB,CAEEP,MAAM,CAACQ,OAAP,CAAeC,QAAf,EAA2B,CAF7B,CAIA;AAEA;AACA;AACA;AAEAV,KAAK,CAACF,eAAN,CAAwBa,cAAc,CAACX,KAAK,CAACJ,YAAP,CAAtC,CACAI,KAAK,CAACH,iBAAN,CAA0Be,gBAAgB,CAACZ,KAAK,CAACJ,YAAP,CAA1C,CAGA,MAAOI,CAAAA,KAAP,CAIF,IAAKN,CAAAA,WAAW,GAAGU,IAAd,CAAmBW,MAAxB,CACEf,KAAK,CAACJ,YAAN,CAAqBI,KAAK,CAACJ,YAAN,CAAmBkB,MAAnB,CAA0B,SAAAP,OAAO,QAAIA,CAAAA,OAAO,CAACC,GAAR,GAAgBP,MAAM,CAACQ,OAA3B,EAAjC,CAArB,CACAT,KAAK,CAACF,eAAN,CAAwBa,cAAc,CAACX,KAAK,CAACJ,YAAP,CAAtC,CACAI,KAAK,CAACH,iBAAN,CAA0Be,gBAAgB,CAACZ,KAAK,CAACJ,YAAP,CAA1C,CACA,MAAOI,CAAAA,KAAP,CAGF,QACE,MAAOA,CAAAA,KAAP,CAjDJ,CAmDD,CArDD,CAwDA,GAAMY,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAR,IAAI,CAAI,CAC/B,GAAIY,CAAAA,KAAK,CAAG,CAAZ,CACAZ,IAAI,CAACa,OAAL,CAAa,SAAAV,OAAO,CAAI,CACtBS,KAAK,EAAIT,OAAO,CAACG,QAAjB,CACD,CAFD,EAGA,MAAOM,CAAAA,KAAP,CACD,CAND,CAQA,GAAML,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAP,IAAI,CAAI,CAC7B,GAAIY,CAAAA,KAAK,CAAG,CAAZ,CAEAZ,IAAI,CAACa,OAAL,CAAa,SAAAV,OAAO,CAAI,CACtBS,KAAK,EAAIT,OAAO,CAACW,KAAR,CAAgBX,OAAO,CAACG,QAAjC,CACD,CAFD,EAIA,MAAOM,CAAAA,KAAP,CACD,CARD,CAUA,cAAejB,CAAAA,WAAf","sourcesContent":["import actiontypes from \"../actiontypes\";\r\n\r\nconst initState = {\r\n  shoppingCart: [],\r\n  totalCartQuantity: 0,\r\n  totalCartAmount: 0\r\n}\r\n\r\nconst cartReducer = (state = initState, action) => {\r\n  let itemIndex\r\n  switch(action.type) {\r\n    case actiontypes().cart.add:\r\n      itemIndex = state.shoppingCart.findIndex(product => product._id === action.payload._id)\r\n      itemIndex < 0\r\n      ? state.shoppingCart = [...state.shoppingCart, {...action.payload, quantity: 1}]\r\n      : state.shoppingCart[itemIndex].quantity += 1\r\n\r\n      state.totalCartAmount = getTotalAmount(state.shoppingCart)\r\n      state.totalCartQuantity = getTotalQuantity(state.shoppingCart)\r\n\r\n      return state\r\n      // if(itemIndex < 0) {\r\n      //   console.log(1)\r\n      //   return {\r\n      //    ...state,\r\n      //    shoppingCart: [...state.shoppingCart, {...action.payload, quantity: 1}]\r\n      //  }\r\n      // } else {\r\n        \r\n      // }\r\n      \r\n\r\n    case actiontypes().cart.sub:\r\n      action.payload.quantity === 1\r\n      ? state.shoppingCart = state.shoppingCart.filter(product => product._id !== action.payload._id)\r\n      : action.payload.quantity -= 1\r\n\r\n      // itemIndex = state.shoppingCart.findIndex(product => product._id === action.payload)\r\n\r\n      // state.shoppingCart[itemIndex].quantity === 1\r\n      // ? state.shoppingCart = state.shoppingCart.filter(product => product._id !== action.payload)\r\n      // : state.shoppingCart[itemIndex].quantity -= 1\r\n\r\n      state.totalCartAmount = getTotalAmount(state.shoppingCart)\r\n      state.totalCartQuantity = getTotalQuantity(state.shoppingCart)\r\n\r\n\r\n      return state\r\n\r\n\r\n\r\n    case actiontypes().cart.delete:\r\n      state.shoppingCart = state.shoppingCart.filter(product => product._id !== action.payload)\r\n      state.totalCartAmount = getTotalAmount(state.shoppingCart)\r\n      state.totalCartQuantity = getTotalQuantity(state.shoppingCart)\r\n      return state;\r\n\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n\r\nconst getTotalQuantity = cart => {\r\n  let total = 0;\r\n  cart.forEach(product => {\r\n    total += product.quantity\r\n  })\r\n  return total;\r\n}\r\n\r\nconst getTotalAmount = cart => {\r\n  let total = 0;\r\n\r\n  cart.forEach(product => {\r\n    total += product.price * product.quantity\r\n  })\r\n\r\n  return total;\r\n}\r\n\r\nexport default cartReducer;"]},"metadata":{},"sourceType":"module"}